/* Optimized CSS for Flow Cytometry Analysis Tool */

/* Efficient font-size definition with inheritance */
body {
  font-size: 18px;
  font-family: 'Arial', sans-serif;
}

/* Let most elements inherit from body */
.container-fluid, .form-control, button, .btn, select, input, label, 
.dataTables_info, .dataTables_paginate {
  font-size: inherit;
}

/* Tables with consistent styling */
.dataTable td, .dataTable th {
  font-size: 17px;
  padding: 8px 10px;
}

/* Consolidated heading styles */
h1, h2, h3, h4, h5 {
  font-weight: 500;
  margin-top: 15px;
  margin-bottom: 10px;
}
h1 { font-size: 32px; }
h2 { font-size: 28px; }
h3 { font-size: 24px; }
h4 { font-size: 22px; }
h5 { font-size: 20px; }

/* Leaner navigation styles */
.nav-tabs > li > a {
  font-size: 18px;
  font-weight: 500;
  background-color: #f8f8f8;
  border-radius: 4px 4px 0 0;
  border: 1px solid #ddd;
  margin-right: 3px;
}

.nav-tabs > li.active > a {
  background-color: #ffffff;
  font-weight: bold;
}

/* Efficient plot text styling using CSS variables */
.plotly text, .ggplot text, .plot text {
  font-family: 'Arial', sans-serif;
}

/* Plotly text sizing controlled via CSS variables */
.g-gtitle, .plotly .gtitle {
  font-size: var(--plotly-title-size, 22px);
  font-weight: bold;
}

.xtitle, .ytitle {
  font-size: var(--plotly-axis-size, 17px);
}

.xtick text, .ytick text {
  font-size: var(--plotly-font-size, 16px);
}

/* Focused spacing for UI components */
.form-group {
  margin-bottom: 15px;
}

/* Optimized wells and panels */
.well { 
  margin-bottom: 15px; 
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  padding: 15px;
}

/* Buttons */
.action-button { 
  width: 100%; 
  margin-bottom: 5px;
  margin-top: 10px;
}

/* Panel styling */
.panel-heading {
  background-color: #f5f5f5;
  font-weight: bold;
}

/* Section headers - combined styles */
h4 {
  margin-top: 15px;
  margin-bottom: 10px;
  padding-bottom: 5px;
  border-bottom: 1px solid #eee;
}

/* Leaner notifications */
.shiny-notification {
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Sliders - combined styles */
.irs-bar, .irs-bar-edge, .irs-from, .irs-to, .irs-single {
  background: #18bc9c;
  border-color: #18bc9c;
}

/* DataTables simplified */
.dataTables_wrapper .dataTables_length, 
.dataTables_wrapper .dataTables_filter {
  margin-bottom: 10px;
}

.dataTable th {
  background-color: #f8f8f8;
  border-bottom: 2px solid #ddd;
}

/* Optimized plot containers with adequate margins */
.plotly, .plot-container, .js-plotly-plot {
  border: 1px solid #eee;
  border-radius: 5px;
  padding: 5px;
  background-color: white;
  position: relative;
  z-index: 1;
}

/* Consolidated plot wrapper styles with simpler selectors */
.plot-container-wrapper {
  margin-bottom: 200px; /* Significantly increased for better spacing */
  position: relative;
  clear: both;
  overflow: visible;
  padding-bottom: 80px; /* Added padding to create more space */
}

/* Tab content - simplified */
.tab-content, .shiny-tab-content {
  overflow: visible;
  padding-bottom: 150px; /* Increased padding at the bottom of tab content */
  position: relative; /* Added for better positioning */
}

/* Button styles - simplified */
.btn-info, .btn-warning, .btn-primary {
  position: relative;
  z-index: 100;
  margin-right: 5px;
}

.btn-primary {
  margin-bottom: 15px;
}

/* Horizontal rule - simplified */
hr {
  margin-top: 30px;
  margin-bottom: 30px;
  clear: both;
}

/* Legend styling */
.js-plotly-plot .plotly .legend .scrollbox {
  font-family: 'Arial', sans-serif;
  background-color: rgba(255, 255, 255, 0.85);
}

/* Control panel for clustering operations */
.control-panel {
  padding: 15px;
  background-color: #f8f9fa;
  border-radius: 5px; 
  border: 1px solid #e9ecef;
  margin-top: 40px;
  margin-bottom: 30px;
  position: relative;
  z-index: 100;
}

/* Special plot containers - increased margins */
#raw_data-clusterPlot, 
#batch_analysis-sampleClusterPlot,
#batch_analysis-sampleHeatmap,
#batch_analysis-sampleDimensionalityPlot,
#batch_analysis-controlSamplePlot,
#batch_analysis-treatedSamplePlot,
#batch_analysis-markerExpressionByCluster,
#batch_analysis-clusterMappingHeatmap,
#batch_analysis-signatureMarkerHeatmap {
  margin-bottom: 200px !important;
}

/* Extra spacing for Plotly elements */
.js-plotly-plot {
  margin-bottom: 80px;
  padding-bottom: 50px;
}

/* Additional spacing after plot containers */
.plotly, .plot-container {
  margin-bottom: 100px;
  position: relative;
  z-index: 1;
}

/* Hover layer */
.plotly .hoverlayer {
  z-index: 999;
}